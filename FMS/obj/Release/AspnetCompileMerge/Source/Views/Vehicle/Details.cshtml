@model FMS.Models.tbl_vehicles

@{
    ViewBag.Title = "Vehicle Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="../../Content/jquery.stepy.css" rel="stylesheet" type="text/css" />
<script src="../../Scripts/jquery.stepy.min.js" type="text/javascript"></script>
<h2><u>@Model.VehicleRegNum.ToString().ToUpper() Details:</u></h2>
 <div id="div_loading" align="center" style="padding-right: 25px; z-index: 3; padding-left: 25px;
        left: 55%; top: 40%; padding-bottom: 15px; padding-top: 15px; position: absolute;">
        <h4>
            </h4>
        <img "../../Content/images/loading-icon.gif"  alt="Loading..."/ >
    </div>
 <div class="bread_title">
                    <div class="bread_navigation">
                        <ul>
                            <li>@Html.ActionLink("Home","Index","Home")</li>
                            @if (Model.Isown == null ? false : (bool)Model.Isown)
                            { <li class="active">@Html.ActionLink("List of Vehicles", "OwnVehicles")</li>  }
                            else
                            {
                                <li class="active">@Html.ActionLink("List of Vehicles", "Index")</li>
                            }
                        </ul>
                    </div>
            </div>
<form id="frmVehicleDetails">
 <fieldset title="Vehicle" class="step" id="callback-step-1" style="display: block;
        width: 90%">
<legend>Vehicle Details</legend>
 <table style="width:100%;">
        <tr>
        <td style="width:50%">
       <table class="table table-striped table-condensed dTableR dataTable">
    <tr>
        <td>
            Vehicle Reg# :
        </td>
        <td>
            @Html.Encode(Model.VehicleRegNum).ToString().ToUpper()
        </td>
    </tr>
    <tr>
        <td>
            Vendor :
        </td>
        <td>
            @Html.Encode(Model.tbl_vendor_details.FirstName + "  " + Model.tbl_vendor_details.LastName).ToString().ToUpper()
        </td>
    </tr>
    <tr>
        <td>
            Vehicle Model :
        </td>
        <td>
            @Html.Encode(Model.tbl_vehicle_models.VehicleModelName).ToString().ToUpper()
        </td>
    </tr>
    <tr>
        <td>
            Manuf. Month,Year :
        </td>
        <td>
            @Html.Encode(Model.ManufactureYearMonth).ToString().ToUpper()
        </td>
    </tr>
    <tr>
        <td>
            Vehicle Type :
        </td>
        <td>
            @Html.Encode(Model.tbl_vehicle_types.VehicleType).ToString().ToUpper()
        </td>
    </tr>
    <tr>
        <td>
            Capacity :
        </td>
        <td>
            @Html.Encode(Model.SeaterId == null ? "" : Model.tbl_seaters.Seater).ToString().ToUpper()
        </td>
    </tr>
    <tr>
        <td>
            Tax Validity :
        </td>
        <td>
            @Html.Encode(Model.TaxValidity == null ? "" : Model.TaxValidity.Value.ToShortDateString())
        </td>
    </tr>
    <tr>
        <td>
            Permit Validity :
        </td>
        <td>
            @Html.Encode(Model.PermitValidity == null ? "" : Model.PermitValidity.Value.ToShortDateString())
        </td>
    </tr>
    <tr>
        <td>
            FitNess Validity :
        </td>
        <td>
            @Html.Encode(Model.FitnessValidity == null ? "" : Model.FitnessValidity.Value.ToShortDateString())
        </td>
    </tr>
    <tr>
        <td>
            Insurance Validity :
        </td>
        <td>
            @Html.Encode(Model.InsuranceValidity == null ? "" : Model.InsuranceValidity.Value.ToShortDateString())
        </td>
    </tr>
    <tr>
        <td>
            Pollution Validity :
        </td>
        <td>
            @Html.Encode(Model.PollutionValidity == null ? "" : Model.PollutionValidity.Value.ToShortDateString())
        </td>
    </tr>
    <tr>
        <td>
            Owner/Driver :
        </td>
        <td>
            @if ((bool)Model.OwnerCumDriver)
            {
                <span class="system positive">Yes</span>
                    }
            else
            {
                <span class="system negative">No</span>
                    }
        </td>
    </tr>
    <tr>
        <td>
            Driver :
        </td>
        <td>
            @Html.Encode(Model.SingleDoubleDriver).ToString().ToUpper()
        </td>
    </tr>
    <tr>
        <td>
            SIM# :
        </td>
        <td>
            @Html.Encode(Model.SIMNumber)
        </td>
    </tr>
</table>
        </td>
        <td style="width:50%">
            &nbsp;
        </td>
        </tr>
        </table>

</fieldset>
 <fieldset title="Owner" class="step" id="callback-step-2" style="display: block;
        width: 98%">
        <legend>Owner Details</legend>
         <table style="width:100%;">
        <tr>
        <td style="width:50%">
       <div id="ViewOwnerDetailsdiv"></div>
        </td>
        <td style="width:50%">
            &nbsp;
        </td>
        </tr>
        </table>
        <br /><br />
    </fieldset>
 <fieldset title="Driver" class="step" id="callback-step-3" style="display: block;
        width: 98%">
        <legend>Driver Details</legend>
        <h2>List of the Drivers</h2>
         <table style="width:100%;">
        <tr>
        <td style="width:100%">
        <div id="ViewDriverDetailsdiv"></div>
        </td>
        </tr>
        </table>
        <br /><br />
    </fieldset>
 <fieldset title="Clients" class="step" id="callback-step-4" style="display: block;
        width: 98%">
        <legend>Clients Details</legend>
        <table style="width:100%;">
        <tr>
        <td style="width:50%">
        <div id="ViewClientDetailsdiv"></div>    
        </td>
        <td style="width:50%">
            &nbsp;
        </td>
        </tr>
        </table>
        <br /><br />
    </fieldset>
 <fieldset title="Documents" class="step" id="callback-step-5" style="display: block; width: 98%">
        <legend>Document Details</legend>
        <table style="width:100%;">
        <tr>
        <td style="width:50%">
        <div id="ViewVehicleDocumentDetailsdiv"></div>    
        </td>
        <td style="width:50%">
            &nbsp;
        </td>
        </tr>
        </table>
        <br /><br />
    </fieldset>
    @if (Model.Isown == true)
    {
        <fieldset title="Service Schedule" class="step" id="callback-step-6" style="display: block; width: 98%">
        <legend>Service Schedule Details</legend>
        <table style="width:100%;">
        <tr>
        <td style="width:50%">
        <div id="ViewAssignServicediv"></div>    
        </td>
        <td style="width:50%">
            &nbsp;
        </td>
        </tr>
        </table>
        <br /><br />
    </fieldset>
    }
</form>
<script type="text/javascript">
    $("#div_loading").hide();
    $('#frmVehicleDetails').stepy({ titleClick: true, select: function (index) {
        switch (index) {
            case 1:
                break;
            case 2:
                var vendorID = '@Model.VendorID';
                ViewOwnerDetails(vendorID);
                break;
            case 3:
                ViewDriversList('@Model.ID');
                break;
            case 4:
                ViewVehicleClient('@Model.ID');
                break;
            case 5:
                ViewVehicleDocuments('@Model.ID');
                break;
            case 6:
                ViewVehicleServices('@Model.ID');
                break;
        }
    }
    });
    function ViewOwnerDetails(vendorID)
    {
        $("#div_loading").fadeIn('slow');
        $.ajax(
    {
        type: "POST",
        url: "../../vendor/Details",
        data: "Id=" + vendorID,
        dataType: "html",
        success: function (result) {
            $('#ViewOwnerDetailsdiv').html(result);
            $("#div_loading").fadeOut('slow');
        },
        error: function (error) {
            alert(error);
        }
    });
    }
    function ViewDriversList(ID)
    {
        $("#div_loading").fadeIn('slow');
        $.ajax(
    {
        type: "GET",
        url: "../../Driver/LoadDriversListByVehicle",
        data: "vehicleID=" + ID,
        dataType: "html",
        success: function (result) {
            $('#ViewDriverDetailsdiv').html(result);
            $("#div_loading").fadeOut('slow');
        },
        error: function (error) {
            alert(error);
        }
    });
}
function ViewVehicleDocuments(ID) {
    $("#div_loading").fadeIn('slow');
    $.ajax({
        type: "GET",
        url: "/Vehicle/LoadDocumentsListByVehicle",
        data: "vehicleID=" + ID,
        dataType: "html",
        success: function (result) {
            $('#ViewVehicleDocumentDetailsdiv').html(result);
            $("#div_loading").fadeOut('slow');
        },
        error: function (error) {
            alert(error);
        }
    });
}
    function ViewVehicleClient(ID) {
        $("#div_loading").fadeIn('slow');
        $.ajax(
    {
        type: "GET",
        url: "../../Vehicle/LoadVehicleClient",
        data: "VehicleID=" + ID,
        dataType: "html",
        success: function (result) {
            $('#ViewClientDetailsdiv').html(result);
            $("#div_loading").fadeOut('slow');
        },
        error: function (error) {
            alert(error);
        }
    });
    }
    function ViewVehicleServices(ID) {
        $("#div_loading").fadeIn('slow');
        $.ajax(
    {
        type: "GET",
        url: "../../Vehicle/GetVehServiceDetailList",
        data: "vehicleId=" + ID,
        dataType: "html",
        success: function (result) {
            $('#ViewAssignServicediv').html(result);
            $("#div_loading").fadeOut('slow');
        },
        error: function (error) {
            alert(error);
        }
    });
    }
</script>